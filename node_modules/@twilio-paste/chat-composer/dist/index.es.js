var __create=Object.create;var __defProp=Object.defineProperty;var __getOwnPropDesc=Object.getOwnPropertyDescriptor;var __getOwnPropNames=Object.getOwnPropertyNames;var __getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty;var __commonJS=(cb,mod)=>function(){return mod||(0,cb[__getOwnPropNames(cb)[0]])((mod={exports:{}}).exports,mod),mod.exports};var __copyProps=(to,from,except,desc)=>{if(from&&typeof from=="object"||typeof from=="function")for(let key of __getOwnPropNames(from))!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to};var __toESM=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:!0}):target,mod));var require_cjs=__commonJS({"../../../../node_modules/deepmerge/dist/cjs.js"(exports,module){"use strict";var isMergeableObject=function(value){return isNonNullObject(value)&&!isSpecial(value)};function isNonNullObject(value){return!!value&&typeof value=="object"}function isSpecial(value){var stringValue=Object.prototype.toString.call(value);return stringValue==="[object RegExp]"||stringValue==="[object Date]"||isReactElement(value)}var canUseSymbol=typeof Symbol=="function"&&Symbol.for,REACT_ELEMENT_TYPE=canUseSymbol?Symbol.for("react.element"):60103;function isReactElement(value){return value.$$typeof===REACT_ELEMENT_TYPE}function emptyTarget(val){return Array.isArray(val)?[]:{}}function cloneUnlessOtherwiseSpecified(value,options){return options.clone!==!1&&options.isMergeableObject(value)?deepmerge(emptyTarget(value),value,options):value}function defaultArrayMerge(target,source,options){return target.concat(source).map(function(element){return cloneUnlessOtherwiseSpecified(element,options)})}function getMergeFunction(key,options){if(!options.customMerge)return deepmerge;var customMerge=options.customMerge(key);return typeof customMerge=="function"?customMerge:deepmerge}function getEnumerableOwnPropertySymbols(target){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(target).filter(function(symbol){return target.propertyIsEnumerable(symbol)}):[]}function getKeys(target){return Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))}function propertyIsOnObject(object,property){try{return property in object}catch{return!1}}function propertyIsUnsafe(target,key){return propertyIsOnObject(target,key)&&!(Object.hasOwnProperty.call(target,key)&&Object.propertyIsEnumerable.call(target,key))}function mergeObject(target,source,options){var destination={};return options.isMergeableObject(target)&&getKeys(target).forEach(function(key){destination[key]=cloneUnlessOtherwiseSpecified(target[key],options)}),getKeys(source).forEach(function(key){propertyIsUnsafe(target,key)||(propertyIsOnObject(target,key)&&options.isMergeableObject(source[key])?destination[key]=getMergeFunction(key,options)(target[key],source[key],options):destination[key]=cloneUnlessOtherwiseSpecified(source[key],options))}),destination}function deepmerge(target,source,options){options=options||{},options.arrayMerge=options.arrayMerge||defaultArrayMerge,options.isMergeableObject=options.isMergeableObject||isMergeableObject,options.cloneUnlessOtherwiseSpecified=cloneUnlessOtherwiseSpecified;var sourceIsArray=Array.isArray(source),targetIsArray=Array.isArray(target),sourceAndTargetTypesMatch=sourceIsArray===targetIsArray;return sourceAndTargetTypesMatch?sourceIsArray?options.arrayMerge(target,source,options):mergeObject(target,source,options):cloneUnlessOtherwiseSpecified(source,options)}deepmerge.all=function(array,options){if(!Array.isArray(array))throw new Error("first argument should be an array");return array.reduce(function(prev,next){return deepmerge(prev,next,options)},{})};var deepmerge_1=deepmerge;module.exports=deepmerge_1}});var import_deepmerge=__toESM(require_cjs());import*as React3 from"react";import{Box as Box2}from"@twilio-paste/box";import{LexicalComposer,ErrorBoundary,ContentEditable,RichTextPlugin,OnChangePlugin,HistoryPlugin}from"@twilio-paste/lexical-library";import{StylingGlobals}from"@twilio-paste/styling-library";import{EmotionCSS}from"@twilio-paste/styling-library";var chatComposerLexicalStyles=EmotionCSS`
.paste-chat-composer-paragraph {
  margin: 0;
  position: relative;
}

.paste-chat-composer-content-editable:focus {
  outline: none;
}
`;import*as React from"react";import{AutoLinkPlugin as LexicalAutoLinkPlugin}from"@twilio-paste/lexical-library";var URL_MATCHER=/(?:(?:https?:\/\/(?:www\.)?)|(?:www\.))[\w#%+.:=@~-]{1,256}\.[\d()A-Za-z]{1,6}\b[\w#%&()+./:=?@~-]*/,EMAIL_MATCHER=/(?:(?:[^\s"(),.:;<>@[\\\]]+(?:\.[^\s"(),.:;<>@[\\\]]+)*)|(?:".+"))@(?:(?:\[(?:\d{1,3}\.){3}\d{1,3}])|(?:(?:[\dA-Za-z\-]+\.)+[A-Za-z]{2,}))/,MATCHERS=[text=>{let match=URL_MATCHER.exec(text);return match&&{index:match.index,length:match[0].length,text:match[0],url:match[0]}},text=>{let match=EMAIL_MATCHER.exec(text);return match&&{index:match.index,length:match[0].length,text:match[0],url:`mailto:${match[0]}`}}],AutoLinkPlugin=()=>React.createElement(LexicalAutoLinkPlugin,{matchers:MATCHERS});AutoLinkPlugin.displayName="AutoLinkPlugin";import*as React2 from"react";import{Box}from"@twilio-paste/box";var PlaceholderWrapper=({placeholder,element})=>React2.createElement(Box,{position:"absolute",top:"space30",left:"space40",right:"space40",display:"flex",alignItems:"center",color:"colorTextWeak",pointerEvents:"none",userSelect:"none",fontStyle:"italic",element},placeholder);PlaceholderWrapper.displayName="PlaceholderWrapper";import{AutoLinkNode,$getRoot,$createParagraphNode,$createTextNode}from"@twilio-paste/lexical-library";var renderInitialText=text=>{let root=$getRoot();if(root.getFirstChild()===null){let paragraph=$createParagraphNode();paragraph.append($createTextNode(text)),root.append(paragraph)}},baseConfig={theme:{paragraph:"paste-chat-composer-paragraph"},nodes:[AutoLinkNode]};var ChatComposer=React3.forwardRef(({children,element="CHAT_COMPOSER",onChange,placeholder="",initialValue,config,maxHeight,disabled,...props},ref)=>{let baseConfigWithEditorState={...baseConfig,editable:!disabled,editorState:initialValue?()=>renderInitialText(initialValue):void 0};return React3.createElement(Box2,{flexGrow:1,ref,element,position:"relative",transition:"background-color 100ms ease-in,box-shadow 100ms ease-in,color 100ms ease-in",paddingY:"space30",paddingX:"space40",borderRadius:"borderRadius20",_focusWithin:{boxShadow:"shadowFocus"},overflowY:"scroll",maxHeight,disabled,"aria-disabled":disabled,_disabled:{color:"colorTextWeaker",backgroundColor:"colorBackground"}},React3.createElement(StylingGlobals,{styles:chatComposerLexicalStyles}),React3.createElement(LexicalComposer,{initialConfig:(0,import_deepmerge.default)(baseConfigWithEditorState,config)},React3.createElement(React3.Fragment,null,React3.createElement(RichTextPlugin,{contentEditable:React3.createElement(ContentEditable,{...props,className:"paste-chat-composer-content-editable"}),placeholder:React3.createElement(PlaceholderWrapper,{element:`${element}_PLACEHOLDER_WRAPPER`,placeholder}),ErrorBoundary}),onChange&&React3.createElement(OnChangePlugin,{onChange}),React3.createElement(HistoryPlugin,null),React3.createElement(AutoLinkPlugin,null),children)))});ChatComposer.displayName="ChatComposer";export{ChatComposer};
